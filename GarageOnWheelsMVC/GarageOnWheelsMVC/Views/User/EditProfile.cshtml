@model GarageOnWheelsMVC.Models.ViewModel.UpdateUserViewModel;
@{
 
    ViewData["Title"] = "Edit Profile";
}


        <div class="row justify-content-center">
            <div class="col-lg-8">
                <div class="card shadow-lg border-0">
                    <div class="card-body p-5">
                        <h3 class="mb-4 text-center text-uppercase">@ViewData["Title"]</h3>
                <form asp-action="EditProfile" asp-controller="User" method="post" enctype="multipart/form-data">
                            <div class="row">
                                <div class="col-md-6 mb-4">
                            <label class="form-label" asp-for="FirstName" class="font-weight-bold">First Name <span class="text-danger ">*</span></label>
                                    <input type="text" asp-for="FirstName" class="form-control form-control-lg" />
                                    <span asp-validation-for="FirstName" class="text-danger"></span>
                                </div>
                                <div class="col-md-6 mb-4">
                            <label class="form-label" asp-for="LastName">Last Name <span class="text-danger">*</span></label>
                                    <input type="text" asp-for="LastName" class="form-control form-control-lg"  />
                                    <span asp-validation-for="LastName" class="text-danger"></span>
                                </div>
                            </div>
                            <div class="form-outline mb-4">
                        <label class="form-label" asp-for="Email">Email <span class="text-danger fw-bold">*</span></label>
                                <input type="email" asp-for="Email" class="form-control form-control-lg" readonly/>
                                <span asp-validation-for="Email" class="text-danger"></span>
                            </div>

                            <div class="mb-4">
                        <h6 class="mb-0">Gender <span class="text-danger">*</span> </h6><br />
                                <div class="form-check form-check-inline">
                                    <input class="form-check-input" type="radio" asp-for="Gender" value="Female"/>
                                    <label class="form-check-label" for="femaleGender">Female</label>
                                </div>
                                <div class="form-check form-check-inline">
                                    <input class="form-check-input" type="radio" asp-for="Gender" value="Male" />
                                    <label class="form-check-label" for="maleGender">Male</label>
                                </div>
                                <div class="form-check form-check-inline">
                                    <input class="form-check-input" type="radio" asp-for="Gender" value="Other" />
                                    <label class="form-check-label" for="otherGender">Other</label>
                                </div>
                                <span asp-validation-for="Gender" class="text-danger"></span>
                            </div>
                            <div class="mb-4">
                        <label class="form-label" asp-for="PhoneNo">Phone No <span class="text-danger">*</span></label>
                                <input type="tel" asp-for="PhoneNo" class="form-control form-control-lg"/>
                                <span asp-validation-for="PhoneNo" class="text-danger"></span>
                            </div>    
                            
                            <input asp-for="Role" hidden/>
                            <input asp-for ="IsEmailVerified" hidden>

                    <div class="row">
                        <div class="col-md-6 mb-4">
                            <label asp-for="CountryId" class="form-label">Country<span class="text-danger fw-bold">*</span></label>
                            <select id="country" asp-for="CountryId" data-countryid="@Model.CountryId" class="form-select form-select-lg" required>
                            </select>
                            <span asp-validation-for="CountryId" class="text-danger"></span>
                        </div>

                        <div class="col-md-6 mb-4">
                            <label asp-for="StateId" class="form-label">State<span class="text-danger fw-bold">*</span></label>
                            <select id="state" asp-for="StateId" data-stateid="@Model.StateId" class="form-select form-select-lg" required>
                            </select>
                            <span asp-validation-for="StateId" class="text-danger"></span>
                        </div>
                    </div>

                    <div class="row">
                        <div class="col-md-6 mb-4">
                            <label asp-for="CityId" class="form-label">City<span class="text-danger fw-bold">*</span></label>
                            <select id="city" asp-for="CityId" data-cityid="@Model.CityId" class="form-select form-select-lg" required>
                            </select>
                            <span asp-validation-for="CityId" class="text-danger"></span>
                        </div>

                        <div class="col-md-6 mb-4">
                            <label asp-for="AreaId" class="form-label">Area<span class="text-danger fw-bold">*</span></label>
                            <select id="area" asp-for="AreaId" data-areaid="@Model.AreaId" class="form-select form-select-lg" required>
                            </select>
                            <span asp-validation-for="AreaId" class="text-danger"></span>
                        </div>
                    </div>
                            <div class="mb-4">
                        <label class="form-label" asp-for="Address">Address<span class="text-danger">*</span></label>
                                <input type="text" asp-for="Address" class="form-control form-control-lg"  />
                                <span asp-validation-for="Address" class="text-danger"></span>
                            </div>
                    <div class="mb-3">
                        <label for="profileImage" class="form-label">Profile Image</label>
                        <div id="profileImage">
                            @if (!string.IsNullOrEmpty(Model.ProfileImage))
                            {
                                <input asp-for="ProfileImage" type="hidden" />
                                <img src="~/Images/@Model.ProfileImage" id="profileImagePreview" alt="Profile Image" style="max-width: 200px;" />
                                <a href="javascript:void(0);" id="deleteImageButton" title="Delete Image" class="text-danger">
                                    <i class="fas fa-trash-alt"></i>
                                </a>
                                <input type="hidden" name="DeleteImage" id="DeleteImage" value="false" />
                            }
                            else
                            {
                                <img src="~/Images/default-placeholder.png" id="profileImagePreview" alt="Default Image" style="max-width: 200px;" />
                            }
                        </div>
                    </div>

                    <div class="mb-3">
                        <label asp-for="ProfileImage" class="form-label">Upload Profile Image</label>
                        <input asp-for="ProfileImage" type="file" class="form-control" id="profileImageInput" name="UpdateImage" />
                        <span asp-validation-for="ProfileImage" class="text-danger"></span>
                    </div>



                            <div class="d-flex justify-content-center">
                                <a class="btn btn-warning btn-lg ms-2" href="@Url.Action("Dashboard", "Account")">Cancel</a>
                                <button type="submit" class="btn btn-primary btn-lg ms-2">Save</button>
                            </div>
                        </form>
                    </div> 
                </div>
            </div>
        </div>
   


@section Scripts {  
    @{
        await Html.RenderPartialAsync("_ValidationScriptsPartial");

    }
    <script src="~/js/cascadingddl.js"></script>
    <script src="~/lib/jquery/dist/jquery.min.js"></script>
    <script src="~/lib/bootstrap/dist/js/bootstrap.bundle.min.js"></script>

    <script>
        $(document).ready(function () {
            var message = '@TempData["Successful"]';
            if (message) {
                toastr.success(message);
            }
        });
    </script>
    <script>
        document.getElementById('profileImageInput').addEventListener('change', function (event) {
            var reader = new FileReader();
            reader.onload = function () {
                document.getElementById('profileImagePreview').src = reader.result;
            };
            if (event.target.files.length > 0) {
                reader.readAsDataURL(event.target.files[0]);
            }
        });

    </script>
    <script>
        document.getElementById('deleteImageButton').addEventListener('click', function () {
            // Set the hidden input to true to indicate image deletion
            document.getElementById('DeleteImage').value = 'true';
            // Optionally, you can update the preview to a default image
            document.getElementById('profileImagePreview').src = '~/Images/default-placeholder.png';
        });
    </script>


}
